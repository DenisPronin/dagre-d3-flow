!function(t){function e(t,e){return"function"==typeof t?t.call(e):t}function i(e,i){this.$element=t(e),this.options=i,this.enabled=!0,this.fixTitle()}i.prototype={show:function(){var i=this.getTitle();if(i&&this.enabled){var n=this.tip();n.find(".tipsy-inner")[this.options.html?"html":"text"](i),n[0].className="tipsy",n.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var o=t.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});if("object"==typeof this.$element[0].nearestViewportElement){var s=this.$element[0],l=s.getBoundingClientRect();o.width=l.width,o.height=l.height}var a,h=n[0].offsetWidth,r=n[0].offsetHeight,f=e(this.options.gravity,this.$element[0]);switch(f.charAt(0)){case"n":a={top:o.top+o.height+this.options.offset,left:o.left+o.width/2-h/2};break;case"s":a={top:o.top-r-this.options.offset,left:o.left+o.width/2-h/2};break;case"e":a={top:o.top+o.height/2-r/2,left:o.left-h-this.options.offset};break;case"w":a={top:o.top+o.height/2-r/2,left:o.left+o.width+this.options.offset}}2==f.length&&("w"==f.charAt(1)?a.left=o.left+o.width/2-15:a.left=o.left+o.width/2-h+15),n.css(a).addClass("tipsy-"+f),n.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+f.charAt(0),this.options.className&&n.addClass(e(this.options.className,this.$element[0])),this.options.fade?n.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):n.css({visibility:"visible",opacity:this.options.opacity});var d=this,p=function(t){return function(){d.$tip.stop(),d.tipHovered=t,t||(0===d.options.delayOut?d.hide():setTimeout(function(){"out"==d.hoverState&&d.hide()},d.options.delayOut))}};n.hover(p(!0),p(!1))}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){t(this).remove()}):this.tip().remove()},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("original-title"))&&t.attr("original-title",t.attr("title")||"").removeAttr("title"),"object"==typeof t.context.nearestViewportElement&&t.children("title").length&&t.append("<original-title>"+(t.children("title").text()||"")+"</original-title>").children("title").remove()},getTitle:function(){var t,e=this.$element,i=this.options;if(this.fixTitle(),"string"==typeof i.title){var n="title"==i.title?"original-title":i.title;t=e.children(n).length?e.children(n).html():e.attr(n)}else"function"==typeof i.title&&(t=i.title.call(e[0]));return t=(""+t).replace(/(^\s*|\s*$)/,""),t||i.fallback},tip:function(){return this.$tip||(this.$tip=t('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},t.fn.tipsy=function(e){function n(n){var o=t.data(n,"tipsy");return o||(o=new i(n,t.fn.tipsy.elementOptions(n,e)),t.data(n,"tipsy",o)),o}function o(){var t=n(this);t.hoverState="in",0===e.delayIn?t.show():(t.fixTitle(),setTimeout(function(){"in"==t.hoverState&&t.show()},e.delayIn))}function s(){var t=n(this);if(t.hoverState="out",0===e.delayOut)t.hide();else{var i=function(){t.tipHovered&&e.hoverlock||"out"==t.hoverState&&t.hide()};setTimeout(i,e.delayOut)}}if(e===!0)return this.data("tipsy");if("string"==typeof e){var l=this.data("tipsy");return l&&l[e](),this}if(e=t.extend({},t.fn.tipsy.defaults,e),e.hoverlock&&0===e.delayOut&&(e.delayOut=100),"manual"!=e.trigger){var a=e.live?"live":"bind",h="hover"==e.trigger?"mouseenter":"focus",r="hover"==e.trigger?"mouseleave":"blur";this[a](h,o)[a](r,s)}return this},t.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",hoverlock:!1},t.fn.tipsy.elementOptions=function(e,i){return t.metadata?t.extend({},i,t(e).metadata()):i},t.fn.tipsy.autoNS=function(){return t(this).offset().top>t(document).scrollTop()+t(window).height()/2?"s":"n"},t.fn.tipsy.autoWE=function(){return t(this).offset().left>t(document).scrollLeft()+t(window).width()/2?"e":"w"},t.fn.tipsy.autoBounds=function(e,i){return function(){var n={ns:i[0],ew:i.length>1?i[1]:!1},o=t(document).scrollTop()+e,s=t(document).scrollLeft()+e,l=t(this);return l.offset().top<o&&(n.ns="n"),l.offset().left<s&&(n.ew="w"),t(window).width()+t(document).scrollLeft()-l.offset().left<e&&(n.ew="e"),t(window).height()+t(document).scrollTop()-l.offset().top<e&&(n.ns="s"),n.ns+(n.ew?n.ew:"")}}}(jQuery);